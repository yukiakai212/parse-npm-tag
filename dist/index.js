import e from"@actions/core";import p from"@actions/github";import u from"semver";try{let r=e.getInput("prefix")||"v",o=p.context.ref.replace(/^refs\/tags\//,"");if(!o.startsWith(r))throw new Error(`Tag '${o}' does not start with expected prefix '${r}'`);let i=o.slice(r.length),t=u.parse(i);if(!t)throw new Error(`Invalid semver tag: ${i}`);let s="latest";t.prerelease.length>0&&(s=t.prerelease[0]);let n=t.build.join(".").toString(),a=t.version.toString()+"+"+n;e.setOutput("tag",s),e.setOutput("version",t.version),e.setOutput("major",t.major.toString()),e.setOutput("minor",t.minor.toString()),e.setOutput("patch",t.patch.toString()),e.setOutput("full",a),e.setOutput("build",n),e.info(`Tag parsed: ${o} \u2192 ${t.version} (${s})`)}catch(r){e.setFailed(r.message)}var h=!0;export{h as default};
