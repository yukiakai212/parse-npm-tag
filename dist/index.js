import e from"@actions/core";import n from"@actions/github";import i from"semver";try{let r=e.getInput("prefix")||"v",o=n.context.ref.replace(/^refs\/tags\//,"");if(!o.startsWith(r))throw new Error(`Tag '${o}' does not start with expected prefix '${r}'`);let a=o.slice(r.length),t=i.parse(a);if(!t)throw new Error(`Invalid semver tag: ${a}`);let s="latest";t.prerelease.length>0&&(s=t.prerelease[0]),e.setOutput("npm_tag",s),e.setOutput("version",t.version),e.setOutput("major",t.major.toString()),e.setOutput("minor",t.minor.toString()),e.setOutput("patch",t.patch.toString()),e.info(`Tag parsed: ${o} \u2192 ${t.version} (${s})`)}catch(r){e.setFailed(r.message)}var l=!0;export{l as default};
